import{o as fe,E as pe,j as me,k as ye,m as ge,p as he,a as j,u as be,l as ve}from"./theme.DSInzM9W.js";import{a4 as _e,o as r,b as w,w as m,r as W,O,k as A,y as $,I as _,aH as ee,b8 as re,K as X,b9 as ue,h as B,c as g,G as S,H as R,az as de,a as k,t as F,_ as ne,a3 as we,z as le,j as N,J as v,e as U,a2 as ke,Q as Se,n as Te,aO as Ce}from"./framework.DeSH-kZ8.js";const xe=e=>typeof e>"u",$e=e=>typeof e=="number"&&!Number.isNaN(e),M=e=>typeof e=="string",q=e=>typeof e=="function",ae=e=>e!==null&&typeof e=="object",Y=(e,f)=>(e.install=n=>{const u=[e];for(const s of u)s.name?n.component(s.name,s):console.warn("Component missing name:",s)},e),ze=Object.assign({inheritAttrs:!1,name:"EasyButton"},{__name:"button",setup(e){const f=$(!1),n=_e(),u=async()=>{try{f.value=!0,q(n.onClick)&&await n.onClick()}finally{f.value=!1}};return(s,b)=>(r(),w(A(pe),O({loading:f.value},A(fe)(A(n),"onClick"),{onClick:u}),{default:m(()=>[W(s.$slots,"default")]),_:3},16,["loading"]))}}),it=Y(ze);function Ue(){return{getComponent:(f,n)=>{if(f&&!M(f)&&!$e(f))return q(f)?f(n):f;const u=f;let s;return M(u)&&u.startsWith("el-")&&(s=_(u)),s&&!M(s)?s:{name:"DynamicText",props:["modelValue"],render(){if(!n)return ee("span",{},u);const d=this.modelValue===null||this.modelValue===""||this.modelValue===void 0?"--":this.modelValue;return ee("span",{},d)}}}}}const ie=Object.assign({name:"EasyDescriptionsComp"},{__name:"comp",props:ue({id:{type:String,default:""},components:{type:[String,Number,Function,Object],default:""},props:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const f=e,n=re(e,"modelValue"),{getComponent:u}=Ue(),s=B(()=>f.id?u(f.components,n.value):u(f.components)),b=B(()=>f.id?{modelValue:n.value[f.id]}:{});return(d,p)=>W(d.$slots,e.components,{},()=>[(r(),w(X(s.value),O({...b.value,...e.props},{"onUpdate:modelValue":p[0]||(p[0]=a=>e.id&&(n.value[e.id]=a))}),null,16))])}}),Ve={class:"epl-descriptions"},Ee=Object.assign({name:"EasyDescriptions"},{__name:"descriptions",props:ue({items:{type:Array,default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:f}){const n=e,u=re(e,"modelValue"),s=d=>d.reduce((p,a)=>((q(a.hidden)?a.hidden(u.value):a.hidden)||p.push({...a,label:ae(a.label)?a.label:{components:a.label},value:ae(a.value)?a.value:{id:a.value,components:a.value}}),p),[]),b=B(()=>!n.items||n.items.length===0?[]:n.items.some(p=>p.items&&Array.isArray(p.items))?n.items.filter(p=>!(q(p.hidden)?p.hidden(u.value):p.hidden)).map(p=>{const{extra:a,items:T,hidden:z,...V}=p;return{...p,rows:s(p.items),bindProps:V}}):[{rows:s(n.items),bindProps:{}}]);return f({}),(d,p)=>(r(),g("div",Ve,[(r(!0),g(S,null,R(b.value,(a,T)=>(r(),w(A(ye),O({key:T,ref_for:!0},{...d.$attrs,...a.bindProps},{style:{"margin-bottom":"20px"}}),de({default:m(()=>[(r(!0),g(S,null,R(a.rows,z=>(r(),w(A(me),O({key:z.label},{ref_for:!0},z),{label:m(()=>[(r(),w(X(ee(ie,{modelValue:u.value,...z.label},d.$slots))))]),default:m(()=>[(r(),w(X(ee(ie,{modelValue:u.value,...z.value},d.$slots))))]),_:2},1040))),128))]),_:2},[a.title||d.$slots.title?{name:"title",fn:m(()=>[a.title?(r(),g(S,{key:0},[k(F(a.title),1)],64)):W(d.$slots,"title",{key:1,group:a,index:T})]),key:"0"}:void 0,a.extra||d.$slots.extra?{name:"extra",fn:m(()=>[a.extra?(r(),g(S,{key:0},[k(F(a.extra),1)],64)):W(d.$slots,"extra",{key:1,group:a,index:T})]),key:"1"}:void 0]),1040))),128))]))}}),st=Y(Ee);Math.easeInOutQuad=function(e,f,n,u){return e/=u/2,e<1?n/2*e*e+f:(e--,-n/2*(e*(e-2)-1)+f)};var Oe=(function(){return typeof window>"u"?function(e){setTimeout(e,1e3/60)}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}})();function je(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function Ne(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function se(e,f,n){const u=Ne(),s=e-u,b=20;let d=0;f=xe(f)?500:f;var p=function(){d+=b;var a=Math.easeInOutQuad(d,u,s,f);je(a),d<f&&Oe(p)};p()}const Ae={class:"table-container"},Fe={class:"table"},Me={key:0},Ie=["innerHTML"],Be=["innerHTML"],De={key:2},Pe={class:"operate-group"},Le=Object.assign({name:"EasyTable"},{__name:"table",props:{columns:{type:Array,default:()=>[]},tableData:{type:Array,default:()=>[]},total:{type:Number,default:0},page:{type:Number,default:1},options:{type:Object,default:()=>({stripe:!1,highlightCurrentRow:!1,border:!0})},limit:{type:Number,default:20},pageSizes:{type:Array,default:()=>[10,20,30,50]},pagerCount:{type:Number,default:()=>typeof document<"u"&&document.body.clientWidth<992?5:7},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1},operates:{type:Object,default:()=>({list:[]})},paginationPosition:{type:String,default:"right"}},emits:["update:page","update:limit","pagination","sortChange","handleSelectionChange"],setup(e,{expose:f,emit:n}){const u=e,s=n,b=we(),d=$(null),p=$([]);le(()=>[u.columns,b],()=>{p.value=u.columns.map(c=>{const o={...c};return o.key||(o.key=o.prop),Object.keys(b).forEach(t=>{const l=t.match(/^(\S+)-(\S+)/);l&&l[2]===o.key&&(o.slot={...o.slot,[l[1]]:l[0]})}),o})},{immediate:!0,deep:!0});const a=c=>{const o=c?.label?.length||0;return Math.max(o*20,100)},T=c=>q(c.show)?c.show():c.show!==!1,z=(c,o)=>q(c.render)?c.render(o):c.render,V=c=>{const o=(u.operates?.list||[]).filter(t=>q(t.show)?t.show(c):t.show!==!1);return o.length>3?{outside:o.slice(0,2),inside:o.slice(2)}:{outside:o,inside:[]}},E=B({get:()=>u.page,set:c=>s("update:page",c)}),D=B({get:()=>u.limit,set:c=>s("update:limit",c)}),Q=B(()=>({left:"flex-start",center:"center",right:"flex-end"})[u.paginationPosition]||"flex-end"),J=c=>{E.value*c>u.total&&(E.value=1),s("pagination",{page:E.value,limit:c}),u.autoScroll&&se(0,800)},P=c=>{s("pagination",{page:c,limit:D.value}),u.autoScroll&&se(0,800)},I=c=>s("sortChange",c),K=c=>s("handleSelectionChange",c);return f({iTableRef:d}),(c,o)=>{const t=_("el-table-column"),l=_("el-icon"),i=_("el-button"),h=_("el-dropdown-item"),G=_("el-dropdown-menu"),L=_("el-dropdown"),Z=_("el-table"),oe=_("el-pagination");return r(),g("div",Ae,[N("div",Fe,[v(Z,O({id:"iTable",ref_key:"iTableRef",ref:d,data:e.tableData},e.options,{height:"100%",style:{width:"100%"},onSortChange:I,onSelectionChange:K}),{default:m(()=>[(r(!0),g(S,null,R(p.value,(y,C)=>(r(),g(S,{key:C+(y.prop||"")},[T(y)?(r(),w(t,O({key:0,"min-width":a(y)},{ref_for:!0},y),de({_:2},[R(y.slot,(x,te)=>({name:te,fn:m(ce=>[W(c.$slots,x,O({ref_for:!0},ce),void 0,!0)])})),y.slot?void 0:{name:"default",fn:m(x=>[y.render?(r(),g(S,{key:0},[A(M)(z(y,x))?(r(),g("div",Me,[N("div",{innerHTML:z(y,x)},null,8,Ie)])):(r(),w(X(y.render),O({key:1,ref_for:!0},x,{row:x.row,index:x.$index}),null,16,["row","index"]))],64)):y.formatter?(r(),g("span",{key:1,innerHTML:y.formatter(x.row,y)},null,8,Be)):y.type?U("",!0):(r(),g("span",De,F(x.row[y.prop]??"--"),1))]),key:"0"}]),1040,["min-width"])):U("",!0)],64))),128)),e.operates.list?.length?(r(),w(t,{key:0,label:"操作",align:"left",width:e.operates.width,fixed:e.operates.fixed},{default:m(y=>[N("div",Pe,[(r(!0),g(S,null,R(V(y.row).outside,(C,x)=>(r(),w(i,O({key:x,ref_for:!0},C,{type:C.type||"primary",size:C.size||"small",onClick:ke(te=>C.method(y.row,y.$index),["stop"])}),{default:m(()=>[k(F(C.label)+" ",1),C.icon?(r(),w(l,{key:0,class:"el-icon--right"},{default:m(()=>[(r(),w(X(C.icon)))]),_:2},1024)):U("",!0)]),_:2},1040,["type","size","onClick"]))),128)),V(y.row).inside.length?(r(),w(L,{key:0,class:"custom-dropdown",trigger:"click"},{dropdown:m(()=>[v(G,null,{default:m(()=>[(r(!0),g(S,null,R(V(y.row).inside,(C,x)=>(r(),w(h,O({key:x},{ref_for:!0},C,{onClick:te=>C.method(y.row,y.$index)}),{default:m(()=>[k(F(C.label),1)]),_:2},1040,["onClick"]))),128))]),_:2},1024)]),default:m(()=>[v(i,{link:"",size:"small",class:"custom-text"},{default:m(()=>[v(l,{size:18},{default:m(()=>[v(A(ge))]),_:1})]),_:1})]),_:2},1024)):U("",!0)])]),_:1},8,["width","fixed"])):U("",!0)]),_:3},16,["data"])]),e.hidden?U("",!0):(r(),g("div",{key:0,class:"pagination-container",style:Se({justifyContent:Q.value})},[v(oe,{"current-page":E.value,"onUpdate:currentPage":o[0]||(o[0]=y=>E.value=y),"page-size":D.value,"onUpdate:pageSize":o[1]||(o[1]=y=>D.value=y),background:e.background,layout:e.layout,"page-sizes":e.pageSizes,"pager-count":e.pagerCount,total:e.total,onSizeChange:J,onCurrentChange:P},null,8,["current-page","page-size","background","layout","page-sizes","pager-count","total"])],4))])}}}),Re=ne(Le,[["__scopeId","data-v-8cdf3800"]]),rt=Y(Re),H="update:modelValue",He={class:"component-upload-image"},qe={key:0,class:"el-upload__tip"},Ge={style:{color:"#f56c6c"}},Qe={style:{color:"#f56c6c"}},Je=["src"],Ke=Object.assign({name:"EasyImageUpload"},{__name:"ImageUpload",props:{modelValue:[String,Object,Array],limit:{type:Number,default:5},fileSize:{type:Number,default:5},fileType:{type:Array,default:()=>["png","jpg","jpeg"]},isShowTip:{type:Boolean,default:!0},action:{type:String,required:!0},headers:{type:Object,default:()=>({})},baseUrl:{type:String,default:""},checkSuccess:{type:Function,default:e=>e.code===200||e.success===!0},responsePath:{type:String,default:"data"},errorField:{type:String,default:"msg"}},emits:[H],setup(e,{emit:f}){const n=e,u=f,s=$(0),b=$([]),d=$(""),p=$(!1),a=$([]),T=$(null),z=B(()=>n.isShowTip&&(n.fileType||n.fileSize)),V=(t,l)=>l?l.split(".").reduce((i,h)=>i&&i[h]!==void 0?i[h]:void 0,t):t;le(()=>n.modelValue,t=>{if(t){const l=Array.isArray(t)?t:t.split(",");a.value=l.map(i=>{if(M(i)){let h=i;!/^https?:\/\//.test(h)&&n.baseUrl&&(h=n.baseUrl+i),i={name:c(i),url:h}}return i})}else a.value=[]},{deep:!0,immediate:!0});function E(t){let l=!1;if(n.fileType.length){const i=t.name.slice(t.name.lastIndexOf(".")+1).toLowerCase();l=n.fileType.map(h=>h.toLowerCase()).includes(i)}else l=t.type.indexOf("image")>-1;return l?n.fileSize&&t.size/1024/1024>n.fileSize?(j.error(`大小不能超过 ${n.fileSize} MB!`),!1):(s.value++,!0):(j.error(`格式不正确, 请上传${n.fileType.join("/")}图片!`),!1)}function D(){j.error(`上传数量不能超过 ${n.limit} 个!`)}function Q(t,l){if(n.checkSuccess(t)){const i=V(t,n.responsePath);i?(b.value.push({name:c(i),url:i}),P()):I(`无法从响应中解析图片路径: ${n.responsePath}`)}else{s.value--;const i=V(t,n.errorField)||"上传失败";j.error(i),T.value.handleRemove(l),P()}}function J(t){const l=a.value.findIndex(i=>i.name===t.name);l>-1&&(a.value.splice(l,1),u(H,o(a.value)))}function P(){s.value>0&&b.value.length===s.value&&(a.value=a.value.filter(t=>t.url!==void 0).concat(b.value),b.value=[],s.value=0,u(H,o(a.value)))}function I(t){j.error(M(t)?t:"上传图片失败"),s.value--}function K(t){d.value=t.url,p.value=!0}function c(t){return M(t)?t.slice(t.lastIndexOf("/")+1):""}function o(t,l=","){return t.filter(i=>i.url&&i.url.indexOf("blob:")!==0).map(i=>{let h=i.url;return n.baseUrl&&h.indexOf(n.baseUrl)===0&&(h=h.replace(n.baseUrl,"")),h}).join(l)}return(t,l)=>{const i=_("el-icon"),h=_("el-upload"),G=_("el-dialog");return r(),g("div",He,[v(h,{ref_key:"imageUploadRef",ref:T,multiple:"",action:e.action,"list-type":"picture-card","on-success":Q,"before-upload":E,limit:e.limit,"on-error":I,"on-exceed":D,"on-remove":J,"show-file-list":!0,headers:e.headers,"file-list":a.value,"on-preview":K,class:Te({hide:a.value.length>=e.limit})},{default:m(()=>[v(i,{class:"avatar-uploader-icon"},{default:m(()=>[v(A(he))]),_:1})]),_:1},8,["action","limit","headers","file-list","class"]),z.value?(r(),g("div",qe,[l[3]||(l[3]=k(" 请上传 ",-1)),e.fileSize?(r(),g(S,{key:0},[l[1]||(l[1]=k(" 大小不超过 ",-1)),N("b",Ge,F(e.fileSize)+"MB",1)],64)):U("",!0),e.fileType?(r(),g(S,{key:1},[l[2]||(l[2]=k(" 格式为 ",-1)),N("b",Qe,F(e.fileType.join("/")),1)],64)):U("",!0),l[4]||(l[4]=k(" 的文件 ",-1))])):U("",!0),v(G,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=L=>p.value=L),title:"预览",width:"800px","append-to-body":""},{default:m(()=>[N("img",{src:d.value,style:{display:"block","max-width":"100%",margin:"0 auto"}},null,8,Je)]),_:1},8,["modelValue"])])}}}),We=ne(Ke,[["__scopeId","data-v-050e1680"]]),ut=Y(We),Xe={class:"component-upload-file"},Ye={key:0,class:"el-upload__tip"},Ze={style:{color:"#f56c6c"}},et={style:{color:"#f56c6c"}},tt={class:"ele-upload-list__item-content-action"},nt=Object.assign({name:"EasyFileUpload"},{__name:"FileUpload",props:{modelValue:[String,Object,Array],limit:{type:Number,default:5},fileSize:{type:Number,default:5},fileType:{type:Array,default:()=>["doc","xls","ppt","txt","pdf"]},isShowTip:{type:Boolean,default:!0},action:{type:String,required:!0},headers:{type:Object,default:()=>({})},baseUrl:{type:String,default:""},checkSuccess:{type:Function,default:e=>e.code===200||e.success===!0},responsePath:{type:String,default:"data"},errorField:{type:String,default:"msg"}},emits:[H],setup(e,{emit:f}){const n=e,u=f,s=$(0),b=$([]),d=$([]),p=$(null),a=B(()=>n.isShowTip&&(n.fileType||n.fileSize)),T=(o,t)=>t?t.split(".").reduce((l,i)=>l&&l[i]!==void 0?l[i]:void 0,o):o;le(()=>n.modelValue,o=>{if(o){const t=Array.isArray(o)?o:o.split(",");d.value=t.map((l,i)=>(M(l)&&(l={name:I(l),url:l,uid:new Date().getTime()+i}),l))}else d.value=[]},{deep:!0,immediate:!0});function z(o){if(n.fileType&&n.fileType.length){const t=o.name.split("."),l=t[t.length-1].toLowerCase();if(!n.fileType.map(h=>h.toLowerCase()).includes(l))return j.error(`文件格式不正确, 请上传${n.fileType.join("/")}格式文件!`),!1}return n.fileSize&&o.size/1024/1024>n.fileSize?(j.error(`上传文件大小不能超过 ${n.fileSize} MB!`),!1):(s.value++,!0)}function V(){j.error(`上传文件数量不能超过 ${n.limit} 个!`)}function E(o){s.value--,j.error(M(o)?o:"上传文件失败")}function D(o,t){if(n.checkSuccess(o)){const l=T(o,n.responsePath);l?(b.value.push({name:I(l),url:l,uid:t.uid}),P()):E(`无法从响应中解析文件路径: ${n.responsePath}`)}else{s.value--;const l=T(o,n.errorField)||"上传失败";j.error(l),p.value?.handleRemove(t),P()}}function Q(o){d.value.splice(o,1),u(H,c(d.value))}function J(o){const t=d.value.findIndex(l=>l.uid===o.uid);t>-1&&(d.value.splice(t,1),u(H,c(d.value)))}function P(){s.value>0&&b.value.length===s.value&&(d.value=d.value.filter(o=>o.url!==void 0).concat(b.value),b.value=[],s.value=0,u(H,c(d.value)))}function I(o){return M(o)?o.slice(o.lastIndexOf("/")+1):""}function K(o){return o?/^https?:\/\//.test(o)?o:n.baseUrl?n.baseUrl+o:o:""}function c(o,t=","){return o.filter(l=>l.url&&l.url.indexOf("blob:")!==0).map(l=>{let i=l.url;return n.baseUrl&&i.indexOf(n.baseUrl)===0&&(i=i.replace(n.baseUrl,"")),i}).join(t)}return(o,t)=>{const l=_("el-icon"),i=_("el-button"),h=_("el-upload"),G=_("el-link");return r(),g("div",Xe,[v(h,{ref_key:"fileUploadRef",ref:p,multiple:"",action:e.action,"before-upload":z,"file-list":d.value,limit:e.limit,"on-error":E,"on-exceed":V,"on-success":D,"on-remove":J,"show-file-list":!1,headers:e.headers,class:"upload-file-uploader"},{default:m(()=>[v(i,{type:"primary"},{default:m(()=>[v(l,{class:"el-icon--left"},{default:m(()=>[v(A(be))]),_:1}),t[0]||(t[0]=k(" 选取文件 ",-1))]),_:1})]),_:1},8,["action","file-list","limit","headers"]),a.value?(r(),g("div",Ye,[t[3]||(t[3]=k(" 请上传 ",-1)),e.fileSize?(r(),g(S,{key:0},[t[1]||(t[1]=k(" 大小不超过 ",-1)),N("b",Ze,F(e.fileSize)+"MB",1)],64)):U("",!0),e.fileType&&e.fileType.length?(r(),g(S,{key:1},[t[2]||(t[2]=k(" 格式为 ",-1)),N("b",et,F(e.fileType.join("/")),1)],64)):U("",!0),t[4]||(t[4]=k(" 的文件 ",-1))])):U("",!0),v(Ce,{class:"upload-file-list el-upload-list el-upload-list--text",name:"el-fade-in-linear",tag:"ul"},{default:m(()=>[(r(!0),g(S,null,R(d.value,(L,Z)=>(r(),g("li",{key:L.uid||Z,class:"el-upload-list__item ele-upload-list__item-content"},[v(G,{href:K(L.url),underline:"never",target:"_blank"},{default:m(()=>[v(l,{class:"el-icon--left"},{default:m(()=>[v(A(ve))]),_:1}),N("span",null,F(I(L.name)),1)]),_:2},1032,["href"]),N("div",tt,[v(G,{underline:"never",onClick:oe=>Q(Z),type:"danger"},{default:m(()=>[...t[5]||(t[5]=[k("删除",-1)])]),_:1},8,["onClick"])])]))),128))]),_:1})])}}}),lt=ne(nt,[["__scopeId","data-v-0eefb5f8"]]),dt=Y(lt);export{it as E,st as a,q as b,dt as c,ut as d,rt as e,M as i};

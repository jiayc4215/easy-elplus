import{i as L,b as B}from"./index.CNiQDyO1.js";import{au as Q,aR as W,aH as n,y as _,o as I,b as X,w as m,J as c,k as i,ai as Y,_ as Z,c as $,j as x,a as b,t as ee,e as te}from"./framework.DeSH-kZ8.js";import{E as d,b as oe,c as q,d as M,e as le,a as O,f as ae}from"./theme.DSInzM9W.js";let ne=null;function se(){return ne}const re=(g,l={},s={},a=null)=>{const p=L(g)?{render:()=>n("div",g)}:Q(g),{title:w="提示",confirmButtonText:o="确 认",cancelButtonText:e="取 消",showConfirmButton:u=!0,showCancelButton:v=!0,methodKey:E="submit",beforeClose:S,onConfirm:j,onCancel:A,footer:h,draggable:P=!0,...G}=s,F=_(!0),k=_(!1),N=_(null),D=a||se(),C=document.createElement("div");return document.body.appendChild(C),new Promise((H,R)=>{let r=null,f=!1;const J=()=>{r&&(r.unmount(),r=null),C.parentNode&&C.parentNode.removeChild(C)},K=()=>{F.value=!1},y=async(t,U)=>{f||(f=!0,t==="resolve"?H(U):R(U),K())},T=async()=>{k.value=!0;try{const t=N.value;t&&E&&B(t[E])&&await t[E](),B(j)&&await j(t),await y("resolve",t)}catch(t){f=!1,R(t)}finally{k.value=!1}},z=()=>{B(A)&&A(),y("reject","closed")};r=W({setup(){return()=>n(oe,{...G,modelValue:F.value,"onUpdate:modelValue":t=>{F.value=t,!t&&!f&&y("reject","closed")},title:w,draggable:P,destroyOnClose:!0,onClosed:J,beforeClose:t=>{S?S(()=>{f||y("reject","closed"),t()}):(f||y("reject","closed"),t())}},{default:()=>n(p,{...l,ref:N}),footer:()=>h?B(h)?h({close:z,confirm:T,loading:k.value}):h:n("div",{class:"dialog-footer"},[v&&n(d,{onClick:z},()=>e),u&&n(d,{type:"primary",loading:k.value,onClick:T},()=>o)])})}}),D&&(Object.assign(r._context,{...D,reload:r._context.reload}),r._context.provides={...D.provides||{},...r._context.provides}),r.mount(C)})},V=re,ie={__name:"DialogFormContent",setup(g,{expose:l}){const s=_(null),a=Y({name:"",email:""}),p=async()=>{if(s.value)return await s.value.validate(),a};return l({validateForm:p,resetForm:()=>{s.value&&s.value.resetFields()},doSomethingInternal:()=>(console.log("组件内部方法被调用了",a),"Internal Result"),submit:p}),(e,u)=>(I(),X(i(le),{ref_key:"formRef",ref:s,model:a,"label-width":"80px"},{default:m(()=>[c(i(q),{label:"姓名",prop:"name",rules:[{required:!0,message:"请输入姓名",trigger:"blur"}]},{default:m(()=>[c(i(M),{modelValue:a.name,"onUpdate:modelValue":u[0]||(u[0]=v=>a.name=v),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),c(i(q),{label:"邮箱",prop:"email",rules:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},{default:m(()=>[c(i(M),{modelValue:a.email,"onUpdate:modelValue":u[1]||(u[1]=v=>a.email=v),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))}},ue={class:"dialog-demo"},de={class:"button-group"},ce={class:"button-group"},me={key:0,class:"result"},pe={__name:"dialog-basic",setup(g){const l=_(""),s=()=>{V("这是一个简单的提示信息，点击确认即可关闭。").then(()=>{l.value="用户点击了确认"}).catch(()=>{l.value="用户取消了操作"})},a=()=>{V(ie,{},{title:"填写信息",width:"500px",onConfirm:async o=>{o.doSomethingInternal();const e=await o.validateForm();l.value=`校验通过: 姓名: ${e.name}, 邮箱: ${e.email}`,O.success("提交成功")}}).catch(o=>{o!=="closed"&&O.warning("表单校验失败")})},p=()=>{V("这个弹窗使用了自定义页脚",{},{title:"自定义页脚",footer:({close:o,confirm:e,loading:u})=>n("div",{style:"display: flex; justify-content: space-between; width: 100%"},[n("span",{style:"color: #999; font-size: 13px"},"自定义提示信息"),n("div",{style:"display: flex; gap: 10px"},[n(d,{onClick:o,size:"small"},()=>"取消"),n(d,{type:"primary",loading:u,onClick:e,size:"small"},()=>"确认")])])})},w=()=>{V("尝试关闭此弹窗会触发二次确认",{},{title:"关闭前拦截",beforeClose:o=>{ae.confirm("确定要关闭吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{o(),l.value="用户确认关闭"}).catch(()=>{l.value="用户取消关闭"})}})};return(o,e)=>(I(),$("div",ue,[e[5]||(e[5]=x("h3",null,"基础用法",-1)),x("div",de,[c(i(d),{onClick:s},{default:m(()=>[...e[0]||(e[0]=[b("纯文本弹窗",-1)])]),_:1}),c(i(d),{type:"success",onClick:a},{default:m(()=>[...e[1]||(e[1]=[b("表单弹窗",-1)])]),_:1})]),e[6]||(e[6]=x("h3",null,"高级用法",-1)),x("div",ce,[c(i(d),{type:"warning",onClick:p},{default:m(()=>[...e[2]||(e[2]=[b("自定义页脚",-1)])]),_:1}),c(i(d),{type:"danger",onClick:w},{default:m(()=>[...e[3]||(e[3]=[b("关闭前拦截",-1)])]),_:1})]),l.value?(I(),$("div",me,[e[4]||(e[4]=x("strong",null,"操作结果：",-1)),b(ee(l.value),1)])):te("",!0)]))}},ye=Z(pe,[["__scopeId","data-v-a9a647de"]]);export{ye as d};
